"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = require("tslib");
var axios_1 = tslib_1.__importDefault(require("axios"));
var baseURL = 'https://api.github.com/repos/grafana/grafana';
// Encapsulates the creation of a client for the Github API
//
// Two key things:
// 1. You can specify whenever you want the credentials to be required or not when imported.
// 2. If the the credentials are available as part of the environment, even if
// they're not required - the library will use them. This allows us to overcome
// any API rate limiting imposed without authentication.
var GithubClient = /** @class */ (function () {
    function GithubClient(required) {
        if (required === void 0) { required = false; }
        var username = process.env.GITHUB_USERNAME;
        var token = process.env.GITHUB_ACCESS_TOKEN;
        var clientConfig = {
            baseURL: baseURL,
            timeout: 10000,
        };
        if (required && !username && !token) {
            throw new Error('operation needs a GITHUB_USERNAME and GITHUB_ACCESS_TOKEN environment variables');
        }
        if (username && token) {
            clientConfig.auth = { username: username, password: token };
        }
        this.client = this.createClient(clientConfig);
    }
    GithubClient.prototype.createClient = function (clientConfig) {
        return axios_1.default.create(clientConfig);
    };
    return GithubClient;
}());
exports.default = GithubClient;
//# sourceMappingURL=githubClient.js.map